!function(e){"use strict";e.fn.bjqs=function(t){var i={width:700,height:300,animtype:"fade",animduration:450,animspeed:4e3,automatic:!0,showcontrols:!0,centercontrols:!0,nexttext:"Next",prevtext:"Prev",showmarkers:!0,centermarkers:!0,keyboardnav:!0,hoverpause:!0,usecaptions:!0,randomstart:!1,responsive:!1},a=e.extend({},i,t),n=this,o=n.find("ul.bjqs"),s=o.children("li"),r=null,l=null,c=null,d=null,u=null,p=null,h=null,f=null,m={slidecount:s.length,animating:!1,paused:!1,currentslide:1,nextslide:0,currentindex:0,nextindex:0,interval:null},g={width:null,height:null,ratio:null},v={fwd:"forward",prev:"previous"},y=function(){s.addClass("bjqs-slide"),a.responsive?b():$(),m.slidecount>1?(a.randomstart&&A(),a.showcontrols&&_(),a.showmarkers&&k(),a.keyboardnav&&C(),a.hoverpause&&a.automatic&&S(),"slide"===a.animtype&&x()):a.automatic=!1,a.usecaptions&&T(),"slide"!==a.animtype||a.randomstart||(m.currentindex=1,m.currentslide=2),o.show(),s.eq(m.currentindex).show(),a.automatic&&(m.interval=setInterval(function(){P(v.fwd,!1)},a.animspeed))},b=function(){g.width=n.outerWidth(),g.ratio=g.width/a.width,g.height=a.height*g.ratio,"fade"===a.animtype&&(s.css({height:a.height,width:"100%"}),s.children("img").css({height:a.height,width:"100%"}),o.css({height:a.height,width:"100%"}),n.css({height:a.height,"max-width":a.width,position:"relative"}),g.width<a.width&&(s.css({height:g.height}),s.children("img").css({height:g.height}),o.css({height:g.height}),n.css({height:g.height})),e(window).resize(function(){g.width=n.outerWidth(),g.ratio=g.width/a.width,g.height=a.height*g.ratio,s.css({height:g.height}),s.children("img").css({height:g.height}),o.css({height:g.height}),n.css({height:g.height})})),"slide"===a.animtype&&(s.css({height:a.height,width:a.width}),s.children("img").css({height:a.height,width:a.width}),o.css({height:a.height,width:a.width*a.slidecount}),n.css({height:a.height,"max-width":a.width,position:"relative"}),g.width<a.width&&(s.css({height:g.height}),s.children("img").css({height:g.height}),o.css({height:g.height}),n.css({height:g.height})),e(window).resize(function(){g.width=n.outerWidth(),g.ratio=g.width/a.width,g.height=a.height*g.ratio,s.css({height:g.height,width:g.width}),s.children("img").css({height:g.height,width:g.width}),o.css({height:g.height,width:g.width*a.slidecount}),n.css({height:g.height}),p.css({height:g.height,width:g.width}),w(function(){P(!1,m.currentslide)},200,"some unique string")}))},w=function(){var e={};return function(t,i,a){a||(a="Don't call this twice without a uniqueId"),e[a]&&clearTimeout(e[a]),e[a]=setTimeout(t,i)}}(),$=function(){s.css({height:a.height,width:a.width}),o.css({height:a.height,width:a.width}),n.css({height:a.height,width:a.width,position:"relative"})},x=function(){h=s.eq(0).clone(),f=s.eq(m.slidecount-1).clone(),h.attr({"data-clone":"last","data-slide":0}).appendTo(o).show(),f.attr({"data-clone":"first","data-slide":0}).prependTo(o).show(),s=o.children("li"),m.slidecount=s.length,p=e('<div class="bjqs-wrapper"></div>'),a.responsive&&g.width<a.width?(p.css({width:g.width,height:g.height,overflow:"hidden",position:"relative"}),o.css({width:g.width*(m.slidecount+2),left:-g.width*m.currentslide})):(p.css({width:a.width,height:a.height,overflow:"hidden",position:"relative"}),o.css({width:a.width*(m.slidecount+2),left:-a.width*m.currentslide})),s.css({"float":"left",position:"relative",display:"list-item"}),p.prependTo(n),o.appendTo(p)},_=function(){if(r=e('<ul class="bjqs-controls"></ul>'),l=e('<li class="bjqs-next"><a href="#" data-direction="'+v.fwd+'">'+a.nexttext+"</a></li>"),c=e('<li class="bjqs-prev"><a href="#" data-direction="'+v.prev+'">'+a.prevtext+"</a></li>"),r.on("click","a",function(t){t.preventDefault();var i=e(this).attr("data-direction");m.animating||(i===v.fwd&&P(v.fwd,!1),i===v.prev&&P(v.prev,!1))}),c.appendTo(r),l.appendTo(r),r.appendTo(n),a.centercontrols){r.addClass("v-centered");var t=(n.height()-l.children("a").outerHeight())/2,i=100*(t/a.height),o=i+"%";l.find("a").css("top",o),c.find("a").css("top",o)}},k=function(){if(d=e('<ol class="bjqs-markers"></ol>'),e.each(s,function(t){var i=t+1,n=t+1;"slide"===a.animtype&&(n=t+2);var o=e('<li><a href="#">'+i+"</a></li>");i===m.currentslide&&o.addClass("active-marker"),o.on("click","a",function(e){e.preventDefault(),m.animating||m.currentslide===n||P(!1,n)}),o.appendTo(d)}),d.appendTo(n),u=d.find("li"),a.centermarkers){d.addClass("h-centered");var t=(a.width-d.width())/2;d.css("left",t)}},C=function(){e(document).keyup(function(e){m.paused||(clearInterval(m.interval),m.paused=!0),m.animating||(39===e.keyCode?(e.preventDefault(),P(v.fwd,!1)):37===e.keyCode&&(e.preventDefault(),P(v.prev,!1))),m.paused&&a.automatic&&(m.interval=setInterval(function(){P(v.fwd)},a.animspeed),m.paused=!1)})},S=function(){n.hover(function(){m.paused||(clearInterval(m.interval),m.paused=!0)},function(){m.paused&&(m.interval=setInterval(function(){P(v.fwd,!1)},a.animspeed),m.paused=!1)})},T=function(){e.each(s,function(t,i){var a=e(i).children("img:first-child").attr("title");a||(a=e(i).children("a").find("img:first-child").attr("title")),a&&(a=e('<p class="bjqs-caption">'+a+"</p>"),a.appendTo(e(i)))})},A=function(){var e=Math.floor(Math.random()*m.slidecount)+1;m.currentslide=e,m.currentindex=e-1},E=function(e){e===v.fwd?s.eq(m.currentindex).next().length?(m.nextindex=m.currentindex+1,m.nextslide=m.currentslide+1):(m.nextindex=0,m.nextslide=1):s.eq(m.currentindex).prev().length?(m.nextindex=m.currentindex-1,m.nextslide=m.currentslide-1):(m.nextindex=m.slidecount-1,m.nextslide=m.slidecount)},P=function(e,t){if(!m.animating&&(m.animating=!0,t?(m.nextslide=t,m.nextindex=t-1):E(e),"fade"===a.animtype&&(a.showmarkers&&(u.removeClass("active-marker"),u.eq(m.nextindex).addClass("active-marker")),s.eq(m.currentindex).fadeOut(a.animduration),s.eq(m.nextindex).fadeIn(a.animduration,function(){m.animating=!1,m.currentslide=m.nextslide,m.currentindex=m.nextindex})),"slide"===a.animtype)){if(a.showmarkers){var i=m.nextindex-1;i===m.slidecount-2?i=0:-1===i&&(i=m.slidecount-3),u.removeClass("active-marker"),u.eq(i).addClass("active-marker")}m.slidewidth=a.responsive&&g.width<a.width?g.width:a.width,o.animate({left:-m.nextindex*m.slidewidth},a.animduration,function(){m.currentslide=m.nextslide,m.currentindex=m.nextindex,"last"===s.eq(m.currentindex).attr("data-clone")?(o.css({left:-m.slidewidth}),m.currentslide=2,m.currentindex=1):"first"===s.eq(m.currentindex).attr("data-clone")&&(o.css({left:-m.slidewidth*(m.slidecount-2)}),m.currentslide=m.slidecount-1,m.currentindex=m.slidecount-2),m.animating=!1})}};y()}}(jQuery);